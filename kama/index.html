<!DOCTYPE html>
<html>

<head>
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
    <link rel="stylesheet" href="styles.css">
    <script src="pace.min.js"></script>
    <script>
        var losujStatus = true;
        var animStatus = false;
        var index = 0;
        var buttonActiveBg = "#c2185b";
        var buttonNActiveBg = "#757575";
        function waiting(ms) {
            return new Promise(resolve => setTimeout(resolve, ms))
        }
        function losuj(){
            index = Math.floor((Math.random() * 48) + 1);
            document.getElementById('imgID').src = "png/" + index + ".png";
        }
        async function losujAnimacja(){
            if(losujStatus==true){
                animStatus = false;
                losujStatus = false;
                document.getElementById('losuj').style.backgroundColor = buttonNActiveBg;
                document.getElementById('animuj').style.backgroundColor = buttonNActiveBg;
                document.getElementById('emoji').innerHTML +="&#128520";
                document.getElementById('emoji').innerHTML = "Losujemy... :>";
                for(var i=0; i<24; i++){
                    losuj();
                    await waiting(i*10);
                    if(i==23){
                        losujStatus = true;
                        document.getElementById('losuj').style.backgroundColor = "#c2185b";
                    }
                }
                document.getElementById('emoji').innerHTML = "&#128520";
                document.getElementById('animuj').style.backgroundColor = "#c2185b";
                animStatus = true;

            }
        }
        async function animuj(){
            if(animStatus==true){
                losujStatus = false;
                document.getElementById('losuj').style.backgroundColor = buttonNActiveBg;
                animStatus = false;
                document.getElementById('animuj').style.backgroundColor = buttonNActiveBg;
                document.getElementById('imgID').src = "gif/" + index + ".gif";
                for (var i=0; i<4; i++){
                    await waiting(1000);
                    document.getElementById('emoji').innerHTML +="&#128520";
                }
                losujStatus = true;
                document.getElementById('losuj').style.backgroundColor = buttonActiveBg;
            }
        }
    </script>
</head>

<body>
<div id="alert">
    UÅ¼ywaj na telefonie w pionowej orientacji!
</div>
<div id="container">

<img id=imgID src="png/0.png" alt="Position">
<div id="emoji">
    <3
</div>
<div class="button" id="losuj" type="button" onclick="losujAnimacja()">LOSUJ</div>
<div class="button" id="animuj" type="button" onclick="animuj()">ANIMUJ</div>
</div>

<div class="hidden">
	<script type="text/javascript">
			var images = new Array()
			function preload() {
				for (i = 0; i < preload.arguments.length; i++) {
					images[i] = new Image()
					images[i].src = preload.arguments[i]
				}
			}
			preload(
				"png/0.png",
                "png/1.png",
                "png/2.png",
                "png/3.png",
                "png/4.png",
                "png/5.png",
                "png/6.png",
                "png/7.png",
                "png/8.png",
                "png/9.png",
                "png/10.png",
                "png/11.png",
                "png/12.png",
                "png/13.png",
                "png/14.png",
                "png/15.png",
                "png/16.png",
                "png/17.png",
                "png/18.png",
                "png/19.png",
                "png/20.png",
                "png/21.png",
                "png/22.png",
                "png/23.png",
                "png/24.png",
                "png/25.png",
                "png/26.png",
                "png/27.png",
                "png/28.png",
                "png/29.png",
                "png/30.png",
                "png/31.png",
                "png/32.png",
                "png/33.png",
                "png/34.png",
                "png/35.png",
                "png/36.png",
                "png/37.png",
                "png/38.png",
                "png/39.png",
                "png/40.png",
                "png/41.png",
                "png/42.png",
                "png/43.png",
                "png/44.png",
                "png/45.png",
                "png/46.png",
                "png/47.png",
                "png/48.png"
			)
	</script>
</div>

</body>

</html>